{"ast":null,"code":"var _jsxFileName = \"/Users/dcmag/Documents/GitRepos/photoshare/src/components/album/AlbumAddPhoto.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { Typography, Card, CardContent, Stack, TextField, Button } from '@mui/material';\nimport { useParams } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport axios from '../../utils/axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AlbumAddPhoto = () => {\n  _s();\n\n  const {\n    album_id\n  } = useParams();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const [formValue, setFormValue] = useState({\n    caption: '',\n    tags: ''\n  });\n\n  const handleChange = e => {\n    setFormValue({ ...formValue,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = () => {\n    const tags = formValue.tags.split(',').map(tag => tag.trim());\n    const file = document.querySelector('#file');\n    if (!album_id) return;\n    const formData = new FormData();\n    formData.append('caption', formValue.caption);\n    formData.append('album_id', album_id);\n    formData.append('tags', JSON.stringify(tags)); // @ts-ignore\n\n    formData.append('file', file.files[0]);\n\n    if (!formValue.caption || !tags || // @ts-ignore\n    file.files.length === 0) {\n      enqueueSnackbar(\"Fill out all required fields.\", {\n        variant: \"error\"\n      });\n      return;\n    }\n\n    axios.post(\"/albums/upload\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      enqueueSnackbar(res.data.message, {\n        variant: res.data.success ? \"success\" : \"error\"\n      });\n      if (res.data.success) window.location.reload();\n    }).catch(() => {\n      enqueueSnackbar(\"Something went wrong.\", {\n        variant: \"error\"\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        mb: 2,\n        children: \"Add Photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          spacing: 2,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Caption\",\n            variant: \"outlined\",\n            name: \"caption\",\n            value: formValue.caption,\n            onChange: handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Tags\",\n            variant: \"outlined\",\n            name: \"tags\",\n            value: formValue.tags,\n            onChange: handleChange,\n            placeholder: \"Separate tags with commas (ex: baseball, football, basketball)\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"file\",\n            type: \"file\",\n            name: \"file\",\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            onClick: e => {\n              e.preventDefault();\n              handleSubmit();\n            },\n            children: \"Add Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AlbumAddPhoto, \"0W5ab/nINmFKb/+9PErtajv7V1k=\", false, function () {\n  return [useParams, useSnackbar];\n});\n\n_c = AlbumAddPhoto;\nexport default AlbumAddPhoto;\n\nvar _c;\n\n$RefreshReg$(_c, \"AlbumAddPhoto\");","map":{"version":3,"sources":["/Users/dcmag/Documents/GitRepos/photoshare/src/components/album/AlbumAddPhoto.tsx"],"names":["useState","Typography","Card","CardContent","Stack","TextField","Button","useParams","useSnackbar","axios","AlbumAddPhoto","album_id","enqueueSnackbar","formValue","setFormValue","caption","tags","handleChange","e","target","name","value","handleSubmit","split","map","tag","trim","file","document","querySelector","formData","FormData","append","JSON","stringify","files","length","variant","post","headers","then","res","data","message","success","window","location","reload","catch","preventDefault"],"mappings":"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","sourcesContent":["import type { FC, ChangeEvent } from 'react';\nimport { useState } from 'react';\nimport {\n  Typography,\n  Card,\n  CardContent,\n  Stack,\n  TextField,\n  Button,\n} from '@mui/material';\nimport { useParams } from 'react-router-dom';\nimport { useSnackbar } from 'notistack';\nimport axios from '../../utils/axios';\n\nconst AlbumAddPhoto : FC = () => {\n  const { album_id } = useParams();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [formValue, setFormValue] = useState({\n    caption: '',\n    tags: '',\n  });\n\n  const handleChange = (e : ChangeEvent<HTMLInputElement>) => {\n    setFormValue({\n      ...formValue,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  const handleSubmit = () => {\n    const tags = formValue.tags.split(',').map(tag => tag.trim());\n    const file = document.querySelector('#file') as HTMLInputElement;\n\n    if (!album_id) return;\n\n    const formData = new FormData();\n\n    formData.append('caption', formValue.caption);\n    formData.append('album_id', album_id);\n    formData.append('tags', JSON.stringify(tags));\n\n    // @ts-ignore\n    formData.append('file', file.files[0]);\n\n    if (\n      !formValue.caption ||\n      !tags ||\n      // @ts-ignore\n      file.files.length === 0\n    ) {\n      enqueueSnackbar(\"Fill out all required fields.\", {\n        variant: \"error\",\n      });\n\n      return;\n    }\n\n    axios\n      .post(\"/albums/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      })\n      .then((res) => {\n        enqueueSnackbar(res.data.message, {\n          variant: res.data.success ? \"success\" : \"error\",\n        })\n\n        if (res.data.success) window.location.reload();\n      })\n      .catch(() => {\n        enqueueSnackbar(\"Something went wrong.\", {\n          variant: \"error\",\n        })\n      });\n  }\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h4\" mb={2}>\n          Add Photo\n        </Typography>\n        <form>\n          <Stack spacing={2}>\n            <TextField\n              label=\"Caption\"\n              variant=\"outlined\"\n              name=\"caption\"\n              value={formValue.caption}\n              onChange={handleChange}\n              required\n            />\n            <TextField\n              label=\"Tags\"\n              variant=\"outlined\"\n              name=\"tags\"\n              value={formValue.tags}\n              onChange={handleChange}\n              placeholder=\"Separate tags with commas (ex: baseball, football, basketball)\"\n              required\n            />\n            <input id=\"file\" type=\"file\" name=\"file\" accept=\"image/*\" />\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              onClick={(e) => {\n                e.preventDefault();\n                handleSubmit();\n              }}\n            >\n              Add Photo\n            </Button>\n          </Stack>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default AlbumAddPhoto"]},"metadata":{},"sourceType":"module"}